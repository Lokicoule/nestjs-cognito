<!DOCTYPE html><html lang="en" class="h-full"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/nestjs-cognito/_next/static/css/7f0c2e5300d2e547.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/nestjs-cognito/_next/static/chunks/webpack-f9afccdf25ea4846.js"/><script src="/nestjs-cognito/_next/static/chunks/d42255d8-b0a4bb792bafb837.js" async=""></script><script src="/nestjs-cognito/_next/static/chunks/283-a111d2a22e01e30f.js" async=""></script><script src="/nestjs-cognito/_next/static/chunks/main-app-2962fde338d49a42.js" async=""></script><script src="/nestjs-cognito/_next/static/chunks/727-307d6dc754c23268.js" async=""></script><script src="/nestjs-cognito/_next/static/chunks/985-728f8f965d873ae2.js" async=""></script><script src="/nestjs-cognito/_next/static/chunks/802-794afc6f7dd2dd66.js" async=""></script><script src="/nestjs-cognito/_next/static/chunks/app/guides/custom-guards/page-5e445df35a27dc7b.js" async=""></script><script src="/nestjs-cognito/_next/static/chunks/384-9c61028d6b9f3d71.js" async=""></script><script src="/nestjs-cognito/_next/static/chunks/app/layout-962d22ed320370d7.js" async=""></script><title>Custom Guards - NestJS Cognito - NestJS-Cognito</title><meta name="description" content="Learn how to create custom authentication guards by extending the AbstractGuard class in NestJS-Cognito."/><link rel="icon" href="/favicon.ico"/><script src="/nestjs-cognito/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="flex min-h-full bg-white antialiased dark:bg-zinc-900"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="w-full"><div class="h-full lg:ml-72 xl:ml-80"><header class="contents lg:pointer-events-none lg:fixed lg:inset-0 lg:z-40 lg:flex"><div class="contents lg:pointer-events-auto lg:block lg:w-72 lg:overflow-y-auto lg:border-r lg:border-zinc-900/10 lg:px-6 lg:pb-8 lg:pt-4 xl:w-80 lg:dark:border-white/10"><div class="hidden lg:flex"><a aria-label="Home" href="/nestjs-cognito"><div class="flex items-center gap-2"><img alt="nestjs-cognito logo" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" class="rounded-lg" style="color:transparent" src="/nestjs-cognito/_next/static/media/logo.12d412ed.png"/><span class="text-xl font-bold bg-gradient-to-l from-[#a79dff] via-[#b2c1ff] via-[#aacbff] to-[#93d0ff] text-transparent bg-clip-text">NestJS-Cognito</span></div></a></div><div class="fixed inset-x-0 top-0 z-50 flex h-14 items-center justify-between gap-12 px-4 transition sm:px-6 lg:left-72 lg:z-30 lg:px-8 xl:left-80 backdrop-blur-sm lg:left-72 xl:left-80 dark:backdrop-blur bg-white/[var(--bg-opacity-light)] dark:bg-zinc-900/[var(--bg-opacity-dark)]" style="--bg-opacity-light:0.5;--bg-opacity-dark:0.2"><div class="absolute inset-x-0 top-full h-px transition bg-zinc-900/7.5 dark:bg-white/7.5"></div><div class="hidden lg:block lg:max-w-md lg:flex-auto"><button type="button" class="hidden h-8 w-full items-center gap-2 rounded-full bg-white pl-2 pr-3 text-sm text-zinc-500 ring-1 ring-zinc-900/10 transition hover:ring-zinc-900/20 ui-not-focus-visible:outline-none lg:flex dark:bg-white/5 dark:text-zinc-400 dark:ring-inset dark:ring-white/10 dark:hover:ring-white/20"><svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="h-5 w-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" d="M12.01 12a4.25 4.25 0 1 0-6.02-6 4.25 4.25 0 0 0 6.02 6Zm0 0 3.24 3.25"></path></svg>Find something...<kbd class="ml-auto text-2xs text-zinc-400 dark:text-zinc-500"><kbd class="font-sans"></kbd><kbd class="font-sans">K</kbd></kbd></button><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></div><div class="flex items-center gap-5 lg:hidden"><button type="button" class="flex h-6 w-6 items-center justify-center rounded-md transition hover:bg-zinc-900/5 dark:hover:bg-white/5" aria-label="Toggle navigation"><svg viewBox="0 0 10 9" fill="none" stroke-linecap="round" aria-hidden="true" class="w-2.5 stroke-zinc-900 dark:stroke-white"><path d="M.5 1h9M.5 8h9M.5 4.5h9"></path></svg></button><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><a aria-label="Home" href="/nestjs-cognito"><div class="flex items-center gap-2"><img alt="nestjs-cognito logo" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" class="rounded-lg" style="color:transparent" src="/nestjs-cognito/_next/static/media/logo.12d412ed.png"/><span class="text-xl font-bold bg-gradient-to-l from-[#a79dff] via-[#b2c1ff] via-[#aacbff] to-[#93d0ff] text-transparent bg-clip-text">NestJS-Cognito</span></div></a></div><div class="flex items-center gap-5"><a class="group" href="https://github.com/Lokicoule/nestjs-cognito"><span class="sr-only">NestJS-Cognito on GitHub</span><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-700 transition group-hover:fill-zinc-900 dark:group-hover:fill-zinc-500"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 1.667c-4.605 0-8.334 3.823-8.334 8.544 0 3.78 2.385 6.974 5.698 8.106.417.075.573-.182.573-.406 0-.203-.011-.875-.011-1.592-2.093.397-2.635-.522-2.802-1.002-.094-.246-.5-1.005-.854-1.207-.291-.16-.708-.556-.01-.567.656-.01 1.124.62 1.281.876.75 1.292 1.948.93 2.427.705.073-.555.291-.93.531-1.143-1.854-.213-3.791-.95-3.791-4.218 0-.929.322-1.698.854-2.296-.083-.214-.375-1.09.083-2.265 0 0 .698-.224 2.292.876a7.576 7.576 0 0 1 2.083-.288c.709 0 1.417.096 2.084.288 1.593-1.11 2.291-.875 2.291-.875.459 1.174.167 2.05.084 2.263.53.599.854 1.357.854 2.297 0 3.278-1.948 4.005-3.802 4.219.302.266.563.78.563 1.58 0 1.143-.011 2.061-.011 2.35 0 .224.156.491.573.405a8.365 8.365 0 0 0 4.11-3.116 8.707 8.707 0 0 0 1.567-4.99c0-4.721-3.73-8.545-8.334-8.545Z"></path></svg></a><div class="flex gap-4"><div class="contents lg:hidden"><button type="button" class="flex h-6 w-6 items-center justify-center rounded-md transition hover:bg-zinc-900/5 ui-not-focus-visible:outline-none lg:hidden dark:hover:bg-white/5" aria-label="Find something..."><svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="h-5 w-5 stroke-zinc-900 dark:stroke-white"><path stroke-linecap="round" stroke-linejoin="round" d="M12.01 12a4.25 4.25 0 1 0-6.02-6 4.25 4.25 0 0 0 6.02 6Zm0 0 3.24 3.25"></path></svg></button><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></div></div></div></div><nav class="hidden lg:mt-10 lg:block lg:space-y-4"><ul role="list"><li class="md:hidden"><a class="block py-1 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito">API</a></li><li class="md:hidden"><a class="block py-1 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="#">Documentation</a></li><li class="md:hidden"><a class="block py-1 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="#">Support</a></li><li class="relative mt-6 md:mt-0"><h2 class="text-xs font-semibold text-zinc-900 dark:text-white">Getting Started</h2><div class="relative mt-3 pl-2"><div class="absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"></div><ul role="list" class="border-l border-transparent"><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito"><span class="truncate">Introduction</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/quickstart"><span class="truncate">Quick Start</span></a></li></ul></div></li><li class="relative mt-6"><h2 class="text-xs font-semibold text-zinc-900 dark:text-white">Features</h2><div class="relative mt-3 pl-2"><div class="absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"></div><ul role="list" class="border-l border-transparent"><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/guides/authentication"><span class="truncate">Authentication</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/guides/authorization"><span class="truncate">Authorization</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/guides/public-route"><span class="truncate">Public Route</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/guides/cognito-user"><span class="truncate">Cognito User</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/guides/graphql"><span class="truncate">GraphQL Support</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/guides/testing"><span class="truncate">Testing</span></a></li></ul></div></li><li class="relative mt-6"><h2 class="text-xs font-semibold text-zinc-900 dark:text-white">Advanced</h2><div class="relative mt-3 pl-2"><div class="absolute inset-x-0 top-0 bg-zinc-800/2.5 will-change-transform dark:bg-white/2.5" style="border-radius:8px;height:32px;top:128px;opacity:0"></div><div class="absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"></div><div class="absolute left-2 h-6 w-[1.8px] bg-violet-300" style="top:132px;opacity:1"></div><ul role="list" class="border-l border-transparent"><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/api/integration"><span class="truncate">Integration Guide</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/api/core-package"><span class="truncate">Core Package</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/api/jwt-verification"><span class="truncate">JWT Verification</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/api/module-configuration"><span class="truncate">Module Configuration</span></a></li><li class="relative"><a aria-current="page" class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-900 dark:text-white" href="/nestjs-cognito/guides/custom-guards"><span class="truncate">Custom Guards</span></a><ul role="list" style="opacity:1"><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/guides/custom-guards#understanding-abstract-guard"><span class="truncate">Understanding AbstractGuard</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/guides/custom-guards#creating-a-custom-guard"><span class="truncate">Creating a Custom Guard</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/guides/custom-guards#using-the-custom-guard"><span class="truncate">Using the Custom Guard</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/guides/custom-guards#guard-inheritance-flow"><span class="truncate">Guard Inheritance Flow</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/guides/custom-guards#best-practices"><span class="truncate">Best Practices</span></a></li></ul></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nestjs-cognito/guides/websocket"><span class="truncate">WebSocket Support</span></a></li></ul></div></li><li class="sticky bottom-0 z-10 mt-6 min-[416px]:hidden"><a class="inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-full bg-zinc-900 py-1 px-3 text-white hover:bg-zinc-700 dark:bg-emerald-500 dark:text-white dark:hover:bg-emerald-400 w-full" href="#">Sign in</a></li></ul></nav></div></header><div class="relative flex h-full flex-col px-4 pt-14 sm:px-6 lg:px-8"><main class="flex-auto"><article class="flex h-full flex-col pb-10 pt-16"><div class="flex-auto prose dark:prose-invert [html_:where(&amp;&gt;*)]:mx-auto [html_:where(&amp;&gt;*)]:max-w-2xl [html_:where(&amp;&gt;*)]:lg:mx-[calc(50%-min(50%,theme(maxWidth.lg)))] [html_:where(&amp;&gt;*)]:lg:max-w-3xl"><h1>Custom Guards</h1>
<p>The <code>@nestjs-cognito/auth</code> package provides an abstract guard class that you can extend to create custom guards with specific validation logic. This guide will show you how to create custom guards by extending the <code>AbstractGuard</code> class.</p>
<h2 class="scroll-mt-24" id="understanding-abstract-guard"><a class="group text-inherit no-underline hover:text-inherit" href="#understanding-abstract-guard">Understanding AbstractGuard</a></h2>
<p>The <code>AbstractGuard</code> class provides the core authentication functionality, including JWT verification and request handling. When you extend this class, you only need to implement two abstract methods:</p>
<div class="my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="not-prose"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-typescript"><span><span style="color: var(--shiki-color-text)">protected abstract </span><span style="color: var(--shiki-token-function)">onValidate</span><span style="color: var(--shiki-color-text)">(user: User): boolean;</span></span>
<span><span style="color: var(--shiki-color-text)">protected abstract </span><span style="color: var(--shiki-token-function)">getRequest</span><span style="color: var(--shiki-color-text)">(context: ExecutionContext): any;</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div></div>
<h2 class="scroll-mt-24" id="creating-a-custom-guard"><a class="group text-inherit no-underline hover:text-inherit" href="#creating-a-custom-guard">Creating a Custom Guard</a></h2>
<p>Here&#x27;s an example of creating a custom guard that validates if a user has a specific email domain:</p>
<div class="my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="not-prose"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-typescript"><span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { Injectable } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;@nestjs/common&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { AbstractGuard } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;@nestjs-cognito/auth&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { ExecutionContext } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;@nestjs/common&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { User } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;@nestjs-cognito/auth&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">@</span><span style="color: var(--shiki-token-function)">Injectable</span><span style="color: var(--shiki-color-text)">()</span></span>
<span><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">class</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">CompanyEmailGuard</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">extends</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">AbstractGuard</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">/**</span></span>
<span><span style="color: var(--shiki-token-comment)">   * Validate if the user&#39;s email belongs to the company domain</span></span>
<span><span style="color: var(--shiki-token-comment)">   */</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">protected</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">onValidate</span><span style="color: var(--shiki-color-text)">(user</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">User</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">boolean</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">user</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">email</span><span style="color: var(--shiki-token-function)">.endsWith</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;@company.com&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span><span style="color: var(--shiki-color-text)">  }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">/**</span></span>
<span><span style="color: var(--shiki-token-comment)">   * Get the request object from the execution context</span></span>
<span><span style="color: var(--shiki-token-comment)">   */</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">protected</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getRequest</span><span style="color: var(--shiki-color-text)">(context</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ExecutionContext</span><span style="color: var(--shiki-color-text)">) {</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">context</span><span style="color: var(--shiki-token-function)">.switchToHttp</span><span style="color: var(--shiki-color-text)">()</span><span style="color: var(--shiki-token-function)">.getRequest</span><span style="color: var(--shiki-color-text)">();</span></span>
<span><span style="color: var(--shiki-color-text)">  }</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div></div>
<h2 class="scroll-mt-24" id="using-the-custom-guard"><a class="group text-inherit no-underline hover:text-inherit" href="#using-the-custom-guard">Using the Custom Guard</a></h2>
<p>You can use your custom guard like any other NestJS guard:</p>
<div class="my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="not-prose"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-typescript"><span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { Controller</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> Get</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> UseGuards } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;@nestjs/common&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { CompanyEmailGuard } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;./company-email.guard&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">@</span><span style="color: var(--shiki-token-function)">Controller</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;protected&#39;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">@</span><span style="color: var(--shiki-token-function)">UseGuards</span><span style="color: var(--shiki-color-text)">(CompanyEmailGuard)</span></span>
<span><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">class</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ProtectedController</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">  @</span><span style="color: var(--shiki-token-function)">Get</span><span style="color: var(--shiki-color-text)">()</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">getProtectedResource</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;This is only accessible to users with company email&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-color-text)">  }</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div></div>
<h2 class="scroll-mt-24" id="guard-inheritance-flow"><a class="group text-inherit no-underline hover:text-inherit" href="#guard-inheritance-flow">Guard Inheritance Flow</a></h2>
<p>When a request comes in, the following flow occurs:</p>
<ol>
<li>The <code>AbstractGuard.canActivate()</code> method is called first</li>
<li>It verifies the JWT token and extracts the user information</li>
<li>If the route is not public, it calls your custom guard&#x27;s <code>onValidate()</code> method</li>
<li>Your validation logic determines if the request is allowed</li>
</ol>
<h2 class="scroll-mt-24" id="best-practices"><a class="group text-inherit no-underline hover:text-inherit" href="#best-practices">Best Practices</a></h2>
<h3>Implementing getRequest</h3>
<p>The <code>getRequest</code> method should handle the appropriate request type. For HTTP requests:</p>
<div class="my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="not-prose"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-typescript"><span><span style="color: var(--shiki-color-text)">protected </span><span style="color: var(--shiki-token-function)">getRequest</span><span style="color: var(--shiki-color-text)">(context: ExecutionContext) {</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">context</span><span style="color: var(--shiki-token-function)">.switchToHttp</span><span style="color: var(--shiki-color-text)">()</span><span style="color: var(--shiki-token-function)">.getRequest</span><span style="color: var(--shiki-color-text)">();</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div></div>
<p>For WebSocket requests:</p>
<div class="my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="not-prose"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-typescript"><span><span style="color: var(--shiki-color-text)">protected </span><span style="color: var(--shiki-token-function)">getRequest</span><span style="color: var(--shiki-color-text)">(context: ExecutionContext) {</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">context</span><span style="color: var(--shiki-token-function)">.switchToWs</span><span style="color: var(--shiki-color-text)">()</span><span style="color: var(--shiki-token-function)">.getClient</span><span style="color: var(--shiki-color-text)">();</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div></div>
<h3>Validation Logic</h3>
<p>Your <code>onValidate</code> method should:</p>
<ul>
<li>Be focused and handle one specific validation concern</li>
<li>Return a boolean indicating if the validation passed</li>
<li>Not throw exceptions (the abstract guard handles that)</li>
<li>Be efficient as it runs on every request</li>
</ul></div><footer class="mx-auto mt-16 w-full max-w-2xl lg:max-w-5xl"></footer></article></main><footer class="mx-auto w-full max-w-2xl space-y-10 pb-16 lg:max-w-5xl"><div class="flex"><div class="flex flex-col items-start gap-3"><a class="inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-full bg-zinc-100 py-1 px-3 text-zinc-900 hover:bg-zinc-200 dark:bg-zinc-800/40 dark:text-zinc-400 dark:ring-1 dark:ring-inset dark:ring-zinc-800 dark:hover:bg-zinc-800 dark:hover:text-zinc-300" aria-label="Previous: Module Configuration" href="/nestjs-cognito/api/module-configuration"><svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="mt-0.5 h-5 w-5 -ml-1 rotate-180"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="m11.5 6.5 3 3.5m0 0-3 3.5m3-3.5h-9"></path></svg>Previous</a><a tabindex="-1" aria-hidden="true" class="text-base font-semibold text-zinc-900 transition hover:text-zinc-600 dark:text-white dark:hover:text-zinc-300" href="/nestjs-cognito/api/module-configuration">Module Configuration</a></div><div class="ml-auto flex flex-col items-end gap-3"><a class="inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-full bg-zinc-100 py-1 px-3 text-zinc-900 hover:bg-zinc-200 dark:bg-zinc-800/40 dark:text-zinc-400 dark:ring-1 dark:ring-inset dark:ring-zinc-800 dark:hover:bg-zinc-800 dark:hover:text-zinc-300" aria-label="Next: WebSocket Support" href="/nestjs-cognito/guides/websocket">Next<svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="mt-0.5 h-5 w-5 -mr-1"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="m11.5 6.5 3 3.5m0 0-3 3.5m3-3.5h-9"></path></svg></a><a tabindex="-1" aria-hidden="true" class="text-base font-semibold text-zinc-900 transition hover:text-zinc-600 dark:text-white dark:hover:text-zinc-300" href="/nestjs-cognito/guides/websocket">WebSocket Support</a></div></div><div class="flex flex-col items-center justify-center gap-3 border-t border-zinc-900/5 pt-8 dark:border-white/5"><p class="text-xs text-zinc-600 dark:text-zinc-400">Â© <!-- -->2025<!-- --> NestJS-Cognito. All rights reserved.</p><p class="text-xs text-zinc-600 dark:text-zinc-400"><a class="hover:text-zinc-900 dark:hover:text-zinc-300 transition" href="/nestjs-cognito/credits">Credits</a></p></div></footer></div></div></div><script src="/nestjs-cognito/_next/static/chunks/webpack-f9afccdf25ea4846.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/nestjs-cognito/_next/static/css/7f0c2e5300d2e547.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[7073,[],\"\"]\n4:I[8017,[\"727\",\"static/chunks/727-307d6dc754c23268.js\",\"985\",\"static/chunks/985-728f8f965d873ae2.js\",\"802\",\"static/chunks/802-794afc6f7dd2dd66.js\",\"663\",\"static/chunks/app/guides/custom-guards/page-5e445df35a27dc7b.js\"],\"Code\"]\n5:I[1995,[\"727\",\"static/chunks/727-307d6dc754c23268.js\",\"985\",\"static/chunks/985-728f8f965d873ae2.js\",\"802\",\"static/chunks/802-794afc6f7dd2dd66.js\",\"663\",\"static/chunks/app/guides/custom-guards/page-5e445df35a27dc7b.js\"],\"Heading\"]\n6:I[8017,[\"727\",\"static/chunks/727-307d6dc754c23268.js\",\"985\",\"static/chunks/985-728f8f965d873ae2.js\",\"802\",\"static/chunks/802-794afc6f7dd2dd66.js\",\"663\",\"static/chunks/app/guides/custom-guards/page-5e445df35a27dc7b.js\"],\"Pre\"]\n9:I[9943,[],\"\"]\na:I[249,[],\"\"]\nd:I[9303,[],\"\"]\n7:T1654,"])</script><script>self.__next_f.push([1,"\u003cspan\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eimport\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e { Injectable } \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-string-expression)\"\u003e\u0026#39;@nestjs/common\u0026#39;\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eimport\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e { AbstractGuard } \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-string-expression)\"\u003e\u0026#39;@nestjs-cognito/auth\u0026#39;\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eimport\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e { ExecutionContext } \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-string-expression)\"\u003e\u0026#39;@nestjs/common\u0026#39;\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eimport\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e { User } \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-string-expression)\"\u003e\u0026#39;@nestjs-cognito/auth\u0026#39;\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e@\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003eInjectable\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eclass\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003eCompanyEmailGuard\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eextends\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003eAbstractGuard\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e  \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-comment)\"\u003e/**\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-token-comment)\"\u003e   * Validate if the user\u0026#39;s email belongs to the company domain\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-token-comment)\"\u003e   */\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e  \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eprotected\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003eonValidate\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e(user\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003e:\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003eUser\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e)\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003e:\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-constant)\"\u003eboolean\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e    \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-constant)\"\u003euser\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003e.\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-constant)\"\u003eemail\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003e.endsWith\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e(\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-string-expression)\"\u003e\u0026#39;@company.com\u0026#39;\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e  \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-comment)\"\u003e/**\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-token-comment)\"\u003e   * Get the request object from the execution context\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-token-comment)\"\u003e   */\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e  \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eprotected\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003egetRequest\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e(context\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003e:\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003eExecutionContext\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e    \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-constant)\"\u003econtext\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003e.switchToHttp\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e()\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003e.getRequest\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"8:Tb22,"])</script><script>self.__next_f.push([1,"\u003cspan\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eimport\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e { Controller\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-punctuation)\"\u003e,\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e Get\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-punctuation)\"\u003e,\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e UseGuards } \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-string-expression)\"\u003e\u0026#39;@nestjs/common\u0026#39;\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eimport\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e { CompanyEmailGuard } \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-string-expression)\"\u003e\u0026#39;./company-email.guard\u0026#39;\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e@\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003eController\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e(\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-string-expression)\"\u003e\u0026#39;protected\u0026#39;\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e@\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003eUseGuards\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e(CompanyEmailGuard)\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003eclass\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003eProtectedController\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e  @\u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003eGet\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e  \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-function)\"\u003egetProtectedResource\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e    \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-keyword)\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e \u003c/span\u003e\u003cspan style=\"color: var(--shiki-token-string-expression)\"\u003e\u0026#39;This is only accessible to users with company email\u0026#39;\u003c/span\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan style=\"color: var(--shiki-color-text)\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"e:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L2\",null,{\"buildId\":\"AG1NeZbtIS3t-faK8XZ-V\",\"assetPrefix\":\"/nestjs-cognito\",\"urlParts\":[\"\",\"guides\",\"custom-guards\"],\"initialTree\":[\"\",{\"children\":[\"guides\",{\"children\":[\"custom-guards\",{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"guides\",{\"children\":[\"custom-guards\",{\"children\":[\"__PAGE__\",{},[[\"$L3\",[\"$\",\"article\",null,{\"className\":\"flex h-full flex-col pb-10 pt-16\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex-auto prose dark:prose-invert [html_:where(\u0026\u003e*)]:mx-auto [html_:where(\u0026\u003e*)]:max-w-2xl [html_:where(\u0026\u003e*)]:lg:mx-[calc(50%-min(50%,theme(maxWidth.lg)))] [html_:where(\u0026\u003e*)]:lg:max-w-3xl\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"Custom Guards\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"$L4\",null,{\"children\":\"@nestjs-cognito/auth\"}],\" package provides an abstract guard class that you can extend to create custom guards with specific validation logic. This guide will show you how to create custom guards by extending the \",[\"$\",\"$L4\",null,{\"children\":\"AbstractGuard\"}],\" class.\"]}],\"\\n\",[\"$\",\"$L5\",null,{\"level\":2,\"id\":\"understanding-abstract-guard\",\"children\":\"Understanding AbstractGuard\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"$L4\",null,{\"children\":\"AbstractGuard\"}],\" class provides the core authentication functionality, including JWT verification and request handling. When you extend this class, you only need to implement two abstract methods:\"]}],\"\\n\",[\"$\",\"$L6\",null,{\"language\":\"typescript\",\"code\":\"protected abstract onValidate(user: User): boolean;\\nprotected abstract getRequest(context: ExecutionContext): any;\\n\",\"children\":[\"$\",\"$L4\",null,{\"className\":\"language-typescript\",\"children\":\"\u003cspan\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003eprotected abstract \u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-token-function)\\\"\u003eonValidate\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e(user: User): boolean;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003eprotected abstract \u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-token-function)\\\"\u003egetRequest\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e(context: ExecutionContext): any;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan\u003e\u003c/span\u003e\"}]}],\"\\n\",[\"$\",\"$L5\",null,{\"level\":2,\"id\":\"creating-a-custom-guard\",\"children\":\"Creating a Custom Guard\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Here's an example of creating a custom guard that validates if a user has a specific email domain:\"}],\"\\n\",[\"$\",\"$L6\",null,{\"language\":\"typescript\",\"code\":\"import { Injectable } from '@nestjs/common';\\nimport { AbstractGuard } from '@nestjs-cognito/auth';\\nimport { ExecutionContext } from '@nestjs/common';\\nimport { User } from '@nestjs-cognito/auth';\\n\\n@Injectable()\\nexport class CompanyEmailGuard extends AbstractGuard {\\n  /**\\n   * Validate if the user's email belongs to the company domain\\n   */\\n  protected onValidate(user: User): boolean {\\n    return user.email.endsWith('@company.com');\\n  }\\n\\n  /**\\n   * Get the request object from the execution context\\n   */\\n  protected getRequest(context: ExecutionContext) {\\n    return context.switchToHttp().getRequest();\\n  }\\n}\\n\",\"children\":[\"$\",\"$L4\",null,{\"className\":\"language-typescript\",\"children\":\"$7\"}]}],\"\\n\",[\"$\",\"$L5\",null,{\"level\":2,\"id\":\"using-the-custom-guard\",\"children\":\"Using the Custom Guard\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"You can use your custom guard like any other NestJS guard:\"}],\"\\n\",[\"$\",\"$L6\",null,{\"language\":\"typescript\",\"code\":\"import { Controller, Get, UseGuards } from '@nestjs/common';\\nimport { CompanyEmailGuard } from './company-email.guard';\\n\\n@Controller('protected')\\n@UseGuards(CompanyEmailGuard)\\nexport class ProtectedController {\\n  @Get()\\n  getProtectedResource() {\\n    return 'This is only accessible to users with company email';\\n  }\\n}\\n\",\"children\":[\"$\",\"$L4\",null,{\"className\":\"language-typescript\",\"children\":\"$8\"}]}],\"\\n\",[\"$\",\"$L5\",null,{\"level\":2,\"id\":\"guard-inheritance-flow\",\"children\":\"Guard Inheritance Flow\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"When a request comes in, the following flow occurs:\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"The \",[\"$\",\"$L4\",null,{\"children\":\"AbstractGuard.canActivate()\"}],\" method is called first\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"It verifies the JWT token and extracts the user information\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"If the route is not public, it calls your custom guard's \",[\"$\",\"$L4\",null,{\"children\":\"onValidate()\"}],\" method\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Your validation logic determines if the request is allowed\"}],\"\\n\"]}],\"\\n\",[\"$\",\"$L5\",null,{\"level\":2,\"id\":\"best-practices\",\"children\":\"Best Practices\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Implementing getRequest\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"$L4\",null,{\"children\":\"getRequest\"}],\" method should handle the appropriate request type. For HTTP requests:\"]}],\"\\n\",[\"$\",\"$L6\",null,{\"language\":\"typescript\",\"code\":\"protected getRequest(context: ExecutionContext) {\\n  return context.switchToHttp().getRequest();\\n}\\n\",\"children\":[\"$\",\"$L4\",null,{\"className\":\"language-typescript\",\"children\":\"\u003cspan\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003eprotected \u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-token-function)\\\"\u003egetRequest\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e(context: ExecutionContext) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e  \u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-token-keyword)\\\"\u003ereturn\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e \u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-token-constant)\\\"\u003econtext\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-token-function)\\\"\u003e.switchToHttp\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-token-function)\\\"\u003e.getRequest\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan\u003e\u003c/span\u003e\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"For WebSocket requests:\"}],\"\\n\",[\"$\",\"$L6\",null,{\"language\":\"typescript\",\"code\":\"protected getRequest(context: ExecutionContext) {\\n  return context.switchToWs().getClient();\\n}\\n\",\"children\":[\"$\",\"$L4\",null,{\"className\":\"language-typescript\",\"children\":\"\u003cspan\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003eprotected \u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-token-function)\\\"\u003egetRequest\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e(context: ExecutionContext) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e  \u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-token-keyword)\\\"\u003ereturn\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e \u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-token-constant)\\\"\u003econtext\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-token-function)\\\"\u003e.switchToWs\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-token-function)\\\"\u003e.getClient\u003c/span\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan\u003e\u003cspan style=\\\"color: var(--shiki-color-text)\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan\u003e\u003c/span\u003e\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Validation Logic\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Your \",[\"$\",\"$L4\",null,{\"children\":\"onValidate\"}],\" method should:\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Be focused and handle one specific validation concern\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Return a boolean indicating if the validation passed\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Not throw exceptions (the abstract guard handles that)\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Be efficient as it runs on every request\"}],\"\\n\"]}]]}],[\"$\",\"footer\",null,{\"className\":\"mx-auto mt-16 w-full max-w-2xl lg:max-w-5xl\"}]]}],null],null],null]},[null,[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guides\",\"children\",\"custom-guards\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guides\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/nestjs-cognito/_next/static/css/7f0c2e5300d2e547.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],\"$Lb\"],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Lc\"],\"globalErrorComponent\":\"$d\",\"missingSlots\":\"$We\"}]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Custom Guards - NestJS Cognito - NestJS-Cognito\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Learn how to create custom authentication guards by extending the AbstractGuard class in NestJS-Cognito.\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\"}]]\n3:null\n"])</script><script>self.__next_f.push([1,"f:I[6639,[\"727\",\"static/chunks/727-307d6dc754c23268.js\",\"985\",\"static/chunks/985-728f8f965d873ae2.js\",\"384\",\"static/chunks/384-9c61028d6b9f3d71.js\",\"802\",\"static/chunks/802-794afc6f7dd2dd66.js\",\"185\",\"static/chunks/app/layout-962d22ed320370d7.js\"],\"Providers\"]\n10:I[9179,[\"727\",\"static/chunks/727-307d6dc754c23268.js\",\"985\",\"static/chunks/985-728f8f965d873ae2.js\",\"384\",\"static/chunks/384-9c61028d6b9f3d71.js\",\"802\",\"static/chunks/802-794afc6f7dd2dd66.js\",\"185\",\"static/chunks/app/layout-962d22ed320370d7.js\"],\"Layout\"]\n11:I[9727,[\"727\",\"static/chunks/727-307d6dc754c23268.js\",\"985\",\"static/chunks/985-728f8f965d873ae2.js\",\"802\",\"static/chunks/802-794afc6f7dd2dd66.js\",\"663\",\"static/chunks/app/guides/custom-guards/page-5e445df35a27dc7b.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"b:[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"h-full\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"flex min-h-full bg-white antialiased dark:bg-zinc-900\",\"children\":[\"$\",\"$Lf\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"w-full\",\"children\":[\"$\",\"$L10\",null,{\"allSections\":{\"/\":[{\"title\":\"Features\",\"id\":\"features\"},{\"title\":\"Why NestJS-Cognito?\",\"id\":\"why-nest-js-cognito\"}],\"/credits\":[{\"title\":\"Icons and Visual Assets\",\"id\":\"icons-and-visual-assets\"}],\"/quickstart\":[{\"title\":\"Installation\",\"id\":\"installation\"},{\"title\":\"Basic Setup\",\"id\":\"basic-setup\"},{\"title\":\"Basic Usage\",\"id\":\"basic-usage\"}],\"/api/core-package\":[{\"title\":\"Installation\",\"id\":\"installation\"},{\"title\":\"Package Architecture\",\"id\":\"package-architecture\"},{\"title\":\"Basic Usage\",\"id\":\"basic-usage\"},{\"title\":\"Integration with Other Packages\",\"id\":\"integration-with-other-packages\"}],\"/api/integration\":[{\"title\":\"Common Integration Patterns\",\"id\":\"common-integration-patterns\"},{\"title\":\"Module Integration Examples\",\"id\":\"module-integration-examples\"}],\"/api/jwt-verification\":[{\"title\":\"JWT Claims Verification\",\"id\":\"jwt-claims-verification\"},{\"title\":\"Cognito JWT Verification\",\"id\":\"cognito-jwt-verification\"},{\"title\":\"RSA JWT Verification\",\"id\":\"rsa-jwt-verification\"}],\"/api/module-configuration\":[{\"title\":\"Async Configuration\",\"id\":\"async-configuration\"},{\"title\":\"Module Options\",\"id\":\"module-options\"},{\"title\":\"Basic Configuration\",\"id\":\"basic-configuration\"},{\"title\":\"Identity Provider Configuration\",\"id\":\"identity-provider-configuration\"},{\"title\":\"JWT Verification Configuration\",\"id\":\"jwt-verification-configuration\"},{\"title\":\"JWK Cache Configuration\",\"id\":\"jwk-cache-configuration\"},{\"title\":\"Important Notes\",\"id\":\"important-notes\"}],\"/guides/authentication\":[{\"title\":\"Overview\",\"id\":\"overview\"},{\"title\":\"Basic Setup\",\"id\":\"basic-setup\"},{\"title\":\"Using @Authentication Decorator\",\"id\":\"using-authentication-decorator\"},{\"title\":\"Public Routes\",\"id\":\"public-routes\"},{\"title\":\"Token Verification\",\"id\":\"token-verification\"}],\"/guides/authorization\":[{\"title\":\"Basic Authorization\",\"id\":\"basic-authorization\"},{\"title\":\"Advanced Rules\",\"id\":\"advanced-rules\"},{\"title\":\"Best Practices\",\"id\":\"best-practices\"}],\"/guides/cognito-user\":[{\"title\":\"Overview\",\"id\":\"overview\"},{\"title\":\"Usage Patterns\",\"id\":\"usage-patterns\"},{\"title\":\"Available Properties\",\"id\":\"available-properties\"}],\"/guides/custom-guards\":[{\"title\":\"Understanding AbstractGuard\",\"id\":\"understanding-abstract-guard\"},{\"title\":\"Creating a Custom Guard\",\"id\":\"creating-a-custom-guard\"},{\"title\":\"Using the Custom Guard\",\"id\":\"using-the-custom-guard\"},{\"title\":\"Guard Inheritance Flow\",\"id\":\"guard-inheritance-flow\"},{\"title\":\"Best Practices\",\"id\":\"best-practices\"}],\"/guides/graphql\":[{\"title\":\"Installation\",\"id\":\"installation\"},{\"title\":\"Basic Setup\",\"id\":\"basic-setup\"},{\"title\":\"Authentication\",\"id\":\"authentication\"},{\"title\":\"Authorization\",\"id\":\"authorization\"},{\"title\":\"User Information\",\"id\":\"user-information\"}],\"/guides/testing\":[{\"title\":\"Getting Started with Testing\",\"id\":\"getting-started-with-testing\"},{\"title\":\"HTTP Testing with Pactum\",\"id\":\"http-testing-with-pactum\"},{\"title\":\"Real E2E Testing\",\"id\":\"real-e2-e-testing\"},{\"title\":\"Mock Testing\",\"id\":\"mock-testing\"},{\"title\":\"Testing Scenarios\",\"id\":\"testing-scenarios\"},{\"title\":\"Advanced Testing\",\"id\":\"advanced-testing\"}],\"/guides/public-route\":[{\"title\":\"Overview\",\"id\":\"overview\"},{\"title\":\"Basic Usage\",\"id\":\"basic-usage\"},{\"title\":\"How It Works\",\"id\":\"how-it-works\"},{\"title\":\"Token Validation Priority\",\"id\":\"token-validation-priority\"},{\"title\":\"Use Cases\",\"id\":\"use-cases\"},{\"title\":\"Common Patterns\",\"id\":\"common-patterns\"}],\"/guides/websocket\":[{\"title\":\"Overview\",\"id\":\"overview\"},{\"title\":\"Implementation\",\"id\":\"implementation\"}]},\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"mx-auto flex h-full max-w-xl flex-col items-center justify-center py-16 text-center\",\"children\":[[\"$\",\"p\",null,{\"className\":\"text-sm font-semibold text-zinc-900 dark:text-white\",\"children\":\"404\"}],[\"$\",\"h1\",null,{\"className\":\"mt-2 text-2xl font-bold text-zinc-900 dark:text-white\",\"children\":\"Page not found\"}],[\"$\",\"p\",null,{\"className\":\"mt-2 text-base text-zinc-600 dark:text-zinc-400\",\"children\":\"Sorry, we couldnât find the page youâre looking for.\"}],[\"$\",\"$L11\",null,{\"className\":\"inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-full bg-zinc-900 py-1 px-3 text-white hover:bg-zinc-700 dark:bg-emerald-400/10 dark:text-emerald-400 dark:ring-1 dark:ring-inset dark:ring-emerald-400/20 dark:hover:bg-emerald-400/10 dark:hover:text-emerald-300 dark:hover:ring-emerald-300 mt-8\",\"href\":\"/\",\"children\":[false,\"Back to docs\",[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"fill\":\"none\",\"aria-hidden\":\"true\",\"className\":\"mt-0.5 h-5 w-5 -mr-1\",\"children\":[\"$\",\"path\",null,{\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"d\":\"m11.5 6.5 3 3.5m0 0-3 3.5m3-3.5h-9\"}]}]]}]]}],\"notFoundStyles\":[]}]}]}]}]}]}]\n"])</script></body></html>